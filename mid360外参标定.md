

# mid360外参标定



您好,大概是有这样几种,提前声明,我并不能保证以下方法合理且科学,仅仅为个人在调试过程中的民间经验,请勿应用于实际生产环境中,如果有错误还请指正和谅解

# 内置imu

## 方法一

首先描述使用内置imu的情况,因为在livox mid360内部,imu芯片位置和激光传感器位置有一定的offset,可以参考livox的说明书,这里仅仅简单贴一张图

[![Image](https://private-user-images.githubusercontent.com/162614736/468293237-c9f9f96c-208f-47aa-8476-7205631cdd43.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTI5MzgzNjAsIm5iZiI6MTc1MjkzODA2MCwicGF0aCI6Ii8xNjI2MTQ3MzYvNDY4MjkzMjM3LWM5ZjlmOTZjLTIwOGYtNDdhYS04NDc2LTcyMDU2MzFjZGQ0My5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwNzE5JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDcxOVQxNTE0MjBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1lMGEyMzUzMzFjZmVmOWQwYzhhM2YyZDdjNmE0NTgzNjgzNjhkMDcyZTFhM2ZjNmQwNDljM2JhMWQ4YzU0NDViJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.Fkx4vTVFcmApwRXIPF03g9gRotO0k3b3qm2ZDB9AfgY)](https://private-user-images.githubusercontent.com/162614736/468293237-c9f9f96c-208f-47aa-8476-7205631cdd43.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTI5MzgzNjAsIm5iZiI6MTc1MjkzODA2MCwicGF0aCI6Ii8xNjI2MTQ3MzYvNDY4MjkzMjM3LWM5ZjlmOTZjLTIwOGYtNDdhYS04NDc2LTcyMDU2MzFjZGQ0My5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwNzE5JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDcxOVQxNTE0MjBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1lMGEyMzUzMzFjZmVmOWQwYzhhM2YyZDdjNmE0NTgzNjgzNjhkMDcyZTFhM2ZjNmQwNDljM2JhMWQ4YzU0NDViJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.Fkx4vTVFcmApwRXIPF03g9gRotO0k3b3qm2ZDB9AfgY) 和这个图 [![Image](https://private-user-images.githubusercontent.com/162614736/468293268-c685966d-d30e-4639-b572-fbea54c003e3.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTI5MzgzNjAsIm5iZiI6MTc1MjkzODA2MCwicGF0aCI6Ii8xNjI2MTQ3MzYvNDY4MjkzMjY4LWM2ODU5NjZkLWQzMGUtNDYzOS1iNTcyLWZiZWE1NGMwMDNlMy5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwNzE5JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDcxOVQxNTE0MjBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT04MDQ4NzJmNDg5NmIyMzRmNzkzYTZiZTdiZGMzNGYyZDNjNTdmYjM1OTdkODY5YzljZDJiM2EzNTMzODE3YTM1JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.kXPW4lmY2bdU305sTSIjaJi1viTeLJgw5_S02QCJ9wY)](https://private-user-images.githubusercontent.com/162614736/468293268-c685966d-d30e-4639-b572-fbea54c003e3.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTI5MzgzNjAsIm5iZiI6MTc1MjkzODA2MCwicGF0aCI6Ii8xNjI2MTQ3MzYvNDY4MjkzMjY4LWM2ODU5NjZkLWQzMGUtNDYzOS1iNTcyLWZiZWE1NGMwMDNlMy5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwNzE5JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDcxOVQxNTE0MjBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT04MDQ4NzJmNDg5NmIyMzRmNzkzYTZiZTdiZGMzNGYyZDNjNTdmYjM1OTdkODY5YzljZDJiM2EzNTMzODE3YTM1JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.kXPW4lmY2bdU305sTSIjaJi1viTeLJgw5_S02QCJ9wY) FAST_LIO的坐标系以IMU为输出坐标原点，所以在IMU坐标系下点云原点位置的坐标：

extrinsic_T: [ -0.011, -0.02329, 0.04412 ]
extrinsic_R: [ 1, 0, 0,
0, 1, 0,
0, 0, 1]
上面这个是fastlio预设的参数,也就是竖直安装时候的参数,所以你可以通过数学方式来计算出倾斜安装的旋转矩阵.
也就是说我优先在livox_driver的yaml文件中设置一个pitch角度,然后再计算出T/R矩阵填写到fastlio中

## 方法二

考虑到一些客观原因造成的不精准度,建议采用这个方法,即完全不改变外参,此时倾斜安装输出的odom坐标系也会倾斜,但是一定收敛,此时可以对Odom进行反方向的坐标转换,即可修正坐标,此时可以竖直上下移动雷达,若发现仅仅z轴大量改变而xy无改变则说明转换正常,如果不是则说明修正的选装矩阵配置错误,在开发过程中不要在使用原odom,

# 外置imu

可以参考这个仓库 https://github.com/hku-mars/LiDAR_IMU_Init 来自hku Mars,改自fastlio2
也可以参考https://github.com/APRIL-ZJU/lidar_IMU_calib 来自zju
工具很多,任选其一即可,
*内置imu,还是建议先数学计算,如果没有收敛,可以考虑内置imu也是用此类工具*

希望对您有所帮助